let { Test, run, writer, assert_eq, test, group, ? }  = import! std.test
let { (<|) } = import! std.function
let prelude  = import! std.prelude
let { Applicative, (*>), ? } = import! std.applicative
let int = import! std.int
let result @ { Result, ? } = import! std.result
let unit @ { ? } = import! std.unit
let { send, recv, channel } = import! std.channel

let { sender, receiver } = channel 0

send sender 0
send sender 1
send sender 2

let tests : Test () = 
    assert_eq (recv receiver) (Ok 0)
        *> assert_eq (recv receiver) (Ok 1)
        *> assert_eq (recv receiver) (Ok 2)

test "channel" <| \_ -> tests
